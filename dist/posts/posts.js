import{j as d,x as h}from"../__chunks__/lit-element.XkUWx5ik.js";function w(a){const{src:o,alt:m,eager:i=!1,breakpoints:c=[{media:"(min-width: 600px)",width:"2000"},{width:"750"}]}=a,p=new URL(o,window.location.href),l=document.createElement("picture"),{pathname:e}=p,s=e.substring(e.lastIndexOf(".")+1);return c.forEach(t=>{const n=document.createElement("source");t.media&&n.setAttribute("media",t.media),n.setAttribute("type","image/webp"),n.setAttribute("srcset",`${e}?width=${t.width}&format=webply&optimize=medium`),l.appendChild(n)}),c.forEach((t,n)=>{if(n<c.length-1){const r=document.createElement("source");t.media&&r.setAttribute("media",t.media),r.setAttribute("srcset",`${e}?width=${t.width}&format=${s}&optimize=medium`),l.appendChild(r)}else{const r=document.createElement("img");r.setAttribute("loading",i?"eager":"lazy"),r.setAttribute("alt",m),l.appendChild(r),r.setAttribute("src",`${e}?width=${t.width}&format=${s}&optimize=medium`)}}),l}const f=a=>{const{postUrl:o,headline:m,text:i,picture:c}=a;return h`<article><a href="${o}" class="image">${c}</a><h3>${m}</h3><p>${i==null?void 0:i.slice(0,200)}</p><ul class="actions"><li><a href="${o}" class="button">More</a></li></ul></article>`},$=a=>a.map(o=>f(o));async function x(a){a.innerHTML="";const i=(await(await fetch(`${window.hlx.codeBasePath}/query-index.json`)).json()).data.filter(e=>e.path.includes("/posts")).map(e=>e),l=(await Promise.all(i.map(async e=>(await fetch(`${window.hlx.codeBasePath}${e.path}.plain.html`)).text()))).map(e=>{var s=new DOMParser;return s.parseFromString(e,"text/html")}).map((e,s)=>{var t,n,r,u;return{postUrl:`${window.hlx.codeBasePath}${i[s].path}`,headline:((t=e.querySelector("h1"))==null?void 0:t.innerText)||((n=e.querySelector("h2"))==null?void 0:n.innerText),text:(u=(r=e.querySelector("p"))==null?void 0:r.innerText)==null?void 0:u.trim(),picture:w({src:i[s].image,alt:i[s].imagealt})}});a.style.removeProperty("display"),d($(l),a)}export{x as default};
//# sourceMappingURL=posts.js.map
