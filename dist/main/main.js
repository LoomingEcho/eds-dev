const S="modulepreload",g=function(i){return"/"+i},f={},v=function(e,t,s){let n=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link");n=Promise.all(t.map(a=>{if(a=g(a),a in f)return;f[a]=!0;const r=a.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(!!s)for(let h=o.length-1;h>=0;h--){const m=o[h];if(m.href===a&&(!r||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${c}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":S,r||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),r)return new Promise((h,m)=>{l.addEventListener("load",h),l.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function u(i){return typeof i=="string"?i.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}const p=(i,e)=>{e.split(",").forEach(t=>{i.classList.add(u(t.trim()))})};function y(i,e=document){const t=i&&i.includes(":")?"property":"name",n=[...e.head.querySelectorAll(`meta[${t}="${i}"]`)].map(o=>o.content).join(", ");return n.length?n:""}function w(i){return u(i).replace(/-([a-z])/g,e=>e[1].toUpperCase())}class E{readBlockConfig(e){const t={};return e.querySelectorAll(":scope > div").forEach(s=>{if(s.children){const n=[...s.children];if(n[1]){const o=n[1],a=u(n[0].textContent??"");let r="";if(o.querySelector("a")){const c=[...o.querySelectorAll("a")];c.length===1?r=c[0].href:r=c.map(d=>d.href)}else if(o.querySelector("img")){const c=[...o.querySelectorAll("img")];c.length===1?r=c[0].src:r=c.map(d=>d.src)}else if(o.querySelector("p")){const c=[...o.querySelectorAll("p")];c.length===1?r=c[0].textContent:r=c.map(d=>d.textContent)}else r=s.children[1].textContent;t[a]=r}}}),t}decorateBlocks(e){e.querySelectorAll("div.section > div > div").forEach(this.decorateBlock)}decorateBlock(e){const t=e.classList[0];if(t){e.classList.add("block"),e.dataset.blockName=t;const s=e.parentElement;s==null||s.classList.add(`${t}-wrapper`);const n=e.closest(".section");n&&n.classList.add(`${t}-container`)}}}class C{constructor(e){this.blockService=e}init(e){this.transformSection(e)}transformSection(e){e.querySelectorAll(":scope > div").forEach(t=>{this.adjustMarkup(t),this.processSectionMetaData(t)})}processSectionMetaData(e){const t=e.querySelector("div.section-metadata");if(t){const s=this.blockService.readBlockConfig(t);Object.keys(s).forEach(n=>{n==="style"?s.style.split(",").filter(a=>a).map(a=>u(a.trim())).forEach(a=>e.classList.add(a)):e.dataset[w(n)]=s[n]}),t.parentElement&&t.parentElement.remove()}}adjustMarkup(e){const t=[];let s=!1;[...e.children].forEach(n=>{if(n.tagName==="DIV"||!s){const o=document.createElement("div");t.push(o),s=n.tagName!=="DIV",s&&o.classList.add("default-content-wrapper")}t[t.length-1].append(n)}),t.forEach(n=>e.append(n)),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none"}}class L{constructor(e,t){this.sectionService=e,this.blockService=t,this.init=async()=>{this.setup(),await this.loadEager()},this.loadEager=async()=>{document.documentElement.lang="en",this.decorateTemplateAndTheme();const s=document.querySelector("main");s&&(s.setAttribute("id","main"),this.addSidebarContainer(s),this.sectionService.init(s),this.addInnerContainer(s),this.blockService.decorateBlocks(s),await this.loadComponents(),document.body.classList.add("appear"))},this.loadComponents=async()=>{document.querySelectorAll(".section").forEach(n=>{const o=[],a=n.querySelectorAll("[data-block-name]");if(!a.length){n.style.removeProperty("display");return}a.forEach(r=>{r.style.display="none",o.push({name:r.dataset.blockName,element:r})}),o.length&&o.forEach(async r=>{const c=await v(()=>import(`${window.hlx.codeBasePath}/dist/${r.name}/${r.name}.js`),__vite__mapDeps([]));c.default&&await c.default(r.element)}),n.style.removeProperty("display")})}}setup(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse=new URLSearchParams(window.location.search).get("lighthouse")==="on";const e=document.querySelector('script[src$="/scripts/scripts.js"]');if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split("/scripts/scripts.js")}catch(t){console.log(t)}}addSidebarContainer(e){const t=document.createElement("div");t.classList.add("sidebar"),t.setAttribute("id","sidebar"),e.after(t)}addInnerContainer(e){const t=e.innerHTML;e.innerHTML=`<div class="inner">${t}</div>`}decorateTemplateAndTheme(){const e=y("template");e&&p(document.body,e);const t=y("theme");t&&p(document.body,t)}}(async function(){const i=new E,e=new C(i);await new L(e,i).init()})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=main.js.map
