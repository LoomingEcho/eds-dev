import{s as w,x as h}from"../__chunks__/lit-element.XkUWx5ik.js";import{t as E}from"../__chunks__/custom-element.qyLKk-84.js";import{n as b}from"../__chunks__/property.y-6B4rf9.js";const C="modulepreload",$=function(n){return"/"+n},v={},L=function(e,t,s){let r=Promise.resolve();if(t&&t.length>0){const i=document.getElementsByTagName("link");r=Promise.all(t.map(a=>{if(a=$(a),a in v)return;v[a]=!0;const o=a.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!s)for(let u=i.length-1;u>=0;u--){const m=i[u];if(m.href===a&&(!o||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${c}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":C,o||(l.as="script",l.crossOrigin=""),l.href=a,document.head.appendChild(l),o)return new Promise((u,m)=>{l.addEventListener("load",u),l.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})};function p(n){return typeof n=="string"?n.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}const y=(n,e)=>{e.split(",").forEach(t=>{n.classList.add(p(t.trim()))})};function S(n,e=document){const t=n&&n.includes(":")?"property":"name",r=[...e.head.querySelectorAll(`meta[${t}="${n}"]`)].map(i=>i.content).join(", ");return r.length?r:""}function P(n){return p(n).replace(/-([a-z])/g,e=>e[1].toUpperCase())}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function M(n){return b({...n,state:!0,attribute:!1})}var q=Object.defineProperty,B=Object.getOwnPropertyDescriptor,g=(n,e,t,s)=>{for(var r=s>1?void 0:s?B(e,t):e,i=n.length-1,a;i>=0;i--)(a=n[i])&&(r=(s?a(e,t,r):a(r))||r);return s&&r&&q(e,t,r),r};let f=class extends w{constructor(){super(...arguments),this.getSubmenuName=n=>n.path.split("/")[1],this.groupByFirstLevelPath=n=>{const e={};return n.forEach(s=>{const r=this.getSubmenuName(s);e[r]||(e[r]=[]),e[r].push({path:s.path,navtitle:this.getNavTitle(s)})}),Object.values(e).map(s=>s.length===1?s[0]:{navtitle:s[0].path.split("/")[1],path:s[0].path,children:s})}}createRenderRoot(){return this}async firstUpdated(){const n=await this.fetchSitemap();this.items=this.groupByFirstLevelPath(n)}render(){if(this.items)return h`<nav id="menu"><header class="major"><h2>Menu</h2></header>${this.renderMenuItems()}</nav>`}renderSubMenu(n){return h`<span @click="${({target:e})=>e.classList.toggle("active")}" class="opener">${n.navtitle}</span><ul>${n.children.map(e=>h`<li><a href="${e.path}">${e.navtitle}</a></li>`)}</ul>`}renderMenuItem(n){return h`<li>${n.children!==void 0?this.renderSubMenu(n):h`<a href="${n.path}">${n.navtitle}</a>`}</li>`}renderMenuItems(){return h`<ul>${this.items.map(n=>this.renderMenuItem(n))}</ul>`}async fetchSitemap(){return(await(await fetch(`${window.hlx.codeBasePath}/query-index.json`)).json()).data}getNavTitle(n){return n.path==="/"?"Homepage":n.navtitle||n.title}};g([M()],f.prototype,"items",2);f=g([E("sidebar-nav")],f);class A{readBlockConfig(e){const t={};return e.querySelectorAll(":scope > div").forEach(s=>{if(s.children){const r=[...s.children];if(r[1]){const i=r[1],a=p(r[0].textContent??"");let o="";if(i.querySelector("a")){const c=[...i.querySelectorAll("a")];c.length===1?o=c[0].href:o=c.map(d=>d.href)}else if(i.querySelector("img")){const c=[...i.querySelectorAll("img")];c.length===1?o=c[0].src:o=c.map(d=>d.src)}else if(i.querySelector("p")){const c=[...i.querySelectorAll("p")];c.length===1?o=c[0].textContent:o=c.map(d=>d.textContent)}else o=s.children[1].textContent;t[a]=o}}}),t}decorateBlocks(e){e.querySelectorAll("div.section > div > div").forEach(this.decorateBlock)}decorateBlock(e){const t=e.classList[0];if(t){e.classList.add("block"),e.dataset.blockName=t;const s=e.parentElement;s==null||s.classList.add(`${t}-wrapper`);const r=e.closest(".section");r&&r.classList.add(`${t}-container`)}}}class j{constructor(e){this.blockService=e}init(e){this.transformSection(e)}transformSection(e){e.querySelectorAll(":scope > div").forEach(t=>{this.adjustMarkup(t),this.processSectionMetaData(t)})}processSectionMetaData(e){const t=e.querySelector("div.section-metadata");if(t){const s=this.blockService.readBlockConfig(t);Object.keys(s).forEach(r=>{r==="style"?s.style.split(",").filter(a=>a).map(a=>p(a.trim())).forEach(a=>e.classList.add(a)):e.dataset[P(r)]=s[r]}),t.parentElement&&t.parentElement.remove()}}adjustMarkup(e){const t=[];let s=!1;[...e.children].forEach(r=>{if(r.tagName==="DIV"||!s){const i=document.createElement("div");t.push(i),s=r.tagName!=="DIV",s&&i.classList.add("default-content-wrapper")}t[t.length-1].append(r)}),t.forEach(r=>e.append(r)),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none"}}class x{constructor(e,t){this.sectionService=e,this.blockService=t,this.init=async()=>{this.setup(),await this.loadEager()},this.loadEager=async()=>{if(document.documentElement.lang="en",this.decorateTemplateAndTheme(),document){const r=document.querySelector("body");r&&(r.style.display="none")}const s=document.querySelector("main");s&&(s.setAttribute("id","main"),this.addSidebarContainer(s),this.sectionService.init(s),this.addInnerContainer(s),this.blockService.decorateBlocks(s),await this.loadComponents(),setTimeout(()=>{document.body.removeAttribute("style")},200))},this.loadComponents=async()=>{document.querySelectorAll(".section").forEach(r=>{const i=[],a=r.querySelectorAll("[data-block-name]");if(!a.length){r.style.removeProperty("display");return}a.forEach(o=>{o.style.display="none",i.push({name:o.dataset.blockName,element:o})}),i.length&&i.forEach(async o=>{const c=await L(()=>import(`${window.hlx.codeBasePath}/dist/${o.name}/${o.name}.js`),__vite__mapDeps([]));c.default&&await c.default(o.element)}),r.style.removeProperty("display")})}}setup(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse=new URLSearchParams(window.location.search).get("lighthouse")==="on";const e=document.querySelector('script[src$="/scripts/scripts.js"]');if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split("/scripts/scripts.js")}catch(t){console.log(t)}}addSidebarContainer(e){const t=document.createElement("div"),s=document.createElement("div"),r=document.createElement("sidebar-nav");s.classList.add("inner"),s.appendChild(r),t.setAttribute("id","sidebar"),t.appendChild(s),e.after(t)}addInnerContainer(e){const t=e.innerHTML;e.innerHTML=`<div class="inner">${t}</div>`}decorateTemplateAndTheme(){const e=S("template");e&&y(document.body,e);const t=S("theme");t&&y(document.body,t)}}(async function(){const n=new A,e=new j(n);await new x(e,n).init()})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=main.js.map
