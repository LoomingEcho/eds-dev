const w="modulepreload",g=function(r){return"/"+r},f={},S=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){const a=document.getElementsByTagName("link");s=Promise.all(t.map(o=>{if(o=g(o),o in f)return;f[o]=!0;const i=o.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(!!n)for(let h=a.length-1;h>=0;h--){const m=a[h];if(m.href===o&&(!i||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":w,i||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),i)return new Promise((h,m)=>{l.addEventListener("load",h),l.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${o}`)))})}))}return s.then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};function u(r){return typeof r=="string"?r.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}const p=(r,e)=>{e.split(",").forEach(t=>{r.classList.add(u(t.trim()))})};function y(r,e=document){const t=r&&r.includes(":")?"property":"name",s=[...e.head.querySelectorAll(`meta[${t}="${r}"]`)].map(a=>a.content).join(", ");return s.length?s:""}function v(r){return u(r).replace(/-([a-z])/g,e=>e[1].toUpperCase())}class E extends HTMLElement{constructor(){super(),this.shadowRoot=this.shadowRoot||this.attachShadow({mode:"open"})}get name(){const e=this.getAttribute("name");if(!e)throw new Error("Icon must have a name attribute");return e}connectedCallback(){console.log("RENDER ICON"),this.render()}async render(){const e=await this.fetchIcon();this.shadowRoot.innerHTML=`<style>:host{display:inline-block;width:50px;height:50px;}svg{display:inline-block;width:100%;height:100%;fill:currentColor;}</style>${e}`}async fetchIcon(){return await(await fetch(`${window.hlx.codeBasePath}/icons/${this.name}.svg`)).text()}}class C{readBlockConfig(e){const t={};return e.querySelectorAll(":scope > div").forEach(n=>{if(n.children){const s=[...n.children];if(s[1]){const a=s[1],o=u(s[0].textContent??"");let i="";if(a.querySelector("a")){const c=[...a.querySelectorAll("a")];c.length===1?i=c[0].href:i=c.map(d=>d.href)}else if(a.querySelector("img")){const c=[...a.querySelectorAll("img")];c.length===1?i=c[0].src:i=c.map(d=>d.src)}else if(a.querySelector("p")){const c=[...a.querySelectorAll("p")];c.length===1?i=c[0].textContent:i=c.map(d=>d.textContent)}else i=n.children[1].textContent;t[o]=i}}}),t}decorateBlocks(e){e.querySelectorAll("div.section > div > div").forEach(this.decorateBlock)}decorateBlock(e){const t=e.classList[0];if(t){e.classList.add("block"),e.dataset.blockName=t;const n=e.parentElement;n==null||n.classList.add(`${t}-wrapper`);const s=e.closest(".section");s&&s.classList.add(`${t}-container`)}}}class b{constructor(e){this.blockService=e}init(e){this.transformSection(e)}transformSection(e){e.querySelectorAll(":scope > div").forEach(t=>{this.adjustMarkup(t),this.processSectionMetaData(t)})}processSectionMetaData(e){const t=e.querySelector("div.section-metadata");if(t){const n=this.blockService.readBlockConfig(t);Object.keys(n).forEach(s=>{s==="style"?n.style.split(",").filter(o=>o).map(o=>u(o.trim())).forEach(o=>e.classList.add(o)):e.dataset[v(s)]=n[s]}),t.parentElement&&t.parentElement.remove()}}adjustMarkup(e){const t=[];let n=!1;[...e.children].forEach(s=>{if(s.tagName==="DIV"||!n){const a=document.createElement("div");t.push(a),n=s.tagName!=="DIV",n&&a.classList.add("default-content-wrapper")}t[t.length-1].append(s)}),t.forEach(s=>e.append(s)),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none"}}class k{constructor(e,t){this.sectionService=e,this.blockService=t,this.init=async()=>{this.setup(),await this.loadEager()},this.registerCustomElements=()=>{customElements.define("icon-component",E)},this.loadEager=async()=>{if(document.documentElement.lang="en",this.decorateTemplateAndTheme(),document){const s=document.querySelector("body");s&&(s.style.display="none")}const n=document.querySelector("main");n&&(n.setAttribute("id","main"),this.addSidebarContainer(n),this.sectionService.init(n),this.addInnerContainer(n),this.blockService.decorateBlocks(n),await this.loadComponents(),setTimeout(()=>{document.body.removeAttribute("style")},200))},this.loadComponents=async()=>{document.querySelectorAll(".section").forEach(s=>{const a=[],o=s.querySelectorAll("[data-block-name]");if(!o.length){s.style.removeProperty("display");return}o.forEach(i=>{i.style.display="none",a.push({name:i.dataset.blockName,element:i})}),a.length&&a.forEach(async i=>{const c=await S(()=>import(`${window.hlx.codeBasePath}/dist/${i.name}/${i.name}.js`),__vite__mapDeps([]));c.default&&await c.default(i.element)}),s.style.removeProperty("display")})}}setup(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse=new URLSearchParams(window.location.search).get("lighthouse")==="on",this.registerCustomElements();const e=document.querySelector('script[src$="/scripts/scripts.js"]');if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split("/scripts/scripts.js")}catch(t){console.log(t)}}addSidebarContainer(e){const t=document.createElement("div");t.classList.add("sidebar"),t.setAttribute("id","sidebar"),e.after(t)}addInnerContainer(e){const t=e.innerHTML;e.innerHTML=`<div class="inner">${t}</div>`}decorateTemplateAndTheme(){const e=y("template");e&&p(document.body,e);const t=y("theme");t&&p(document.body,t)}}(async function(){const r=new C,e=new b(r);await new k(e,r).init()})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=main.js.map
