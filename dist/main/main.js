import{s as S,x as p}from"../__chunks__/lit-element.XkUWx5ik.js";import{t as w}from"../__chunks__/custom-element.qyLKk-84.js";const E="modulepreload",C=function(i){return"/"+i},f={},b=function(e,t,n){let a=Promise.resolve();if(t&&t.length>0){const s=document.getElementsByTagName("link");a=Promise.all(t.map(r=>{if(r=C(r),r in f)return;f[r]=!0;const o=r.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let h=s.length-1;h>=0;h--){const u=s[h];if(u.href===r&&(!o||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":E,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((h,u)=>{c.addEventListener("load",h),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${r}`)))})}))}return a.then(()=>e()).catch(s=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=s,window.dispatchEvent(r),!r.defaultPrevented)throw s})};function m(i){return typeof i=="string"?i.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}const v=(i,e)=>{e.split(",").forEach(t=>{i.classList.add(m(t.trim()))})};function y(i,e=document){const t=i&&i.includes(":")?"property":"name",a=[...e.head.querySelectorAll(`meta[${t}="${i}"]`)].map(s=>s.content).join(", ");return a.length?a:""}function L(i){return m(i).replace(/-([a-z])/g,e=>e[1].toUpperCase())}var A=Object.defineProperty,M=Object.getOwnPropertyDescriptor,q=(i,e,t,n)=>{for(var a=n>1?void 0:n?M(e,t):e,s=i.length-1,r;s>=0;s--)(r=i[s])&&(a=(n?r(e,t,a):r(a))||a);return n&&a&&A(e,t,a),a};let g=class extends S{createRenderRoot(){return this}async connectedCallback(){super.connectedCallback();const i=await this.fetchSitemap();this.mapSitemapToMenuItems(i)}render(){return p`<nav id="menu"><header class="major"><h2>Menu</h2></header>${this.renderMenuItems()}</nav>`}renderMenuItems(){return p`<ul><li><a href="index.html">Homepage</a></li><li><a href="generic.html">Generic</a></li><li><a href="elements.html">Elements</a></li><li><span class="opener">Submenu</span><ul><li><a href="#">Lorem Dolor</a></li><li><a href="#">Ipsum Adipiscing</a></li><li><a href="#">Tempus Magna</a></li><li><a href="#">Feugiat Veroeros</a></li></ul></li><li><a href="#">Etiam Dolore</a></li><li><a href="#">Adipiscing</a></li><li><span class="opener">Another Submenu</span><ul><li><a href="#">Lorem Dolor</a></li><li><a href="#">Ipsum Adipiscing</a></li><li><a href="#">Tempus Magna</a></li><li><a href="#">Feugiat Veroeros</a></li></ul></li><li><a href="#">Maximus Erat</a></li><li><a href="#">Sapien Mauris</a></li><li><a href="#">Amet Lacinia</a></li></ul>`}async fetchSitemap(){return await(await fetch(`${window.hlx.codeBasePath}/query-index.json`)).json()}mapSitemapToMenuItems(i){let e={};i.data.forEach(n=>{const a=n.path.split("/"),s={navTitle:n.navtitle,path:n.path};if(a.length>2){if(typeof e[a[1]]>"u"){e[a[1]]=[s];return}e[a[1]].push(s)}});const t=[];i.data.forEach(n=>{const a=n.path.split("/"),s={navTitle:n.navtitle,path:n.path};if(typeof e[a[1]]<"u"){t.push({navTitle:n.navtitle?n.navtitle:a[1],items:e[a[1]]});return}t.push(s)}),console.log(t)}};g=q([w("sidebar-nav")],g);class T{readBlockConfig(e){const t={};return e.querySelectorAll(":scope > div").forEach(n=>{if(n.children){const a=[...n.children];if(a[1]){const s=a[1],r=m(a[0].textContent??"");let o="";if(s.querySelector("a")){const l=[...s.querySelectorAll("a")];l.length===1?o=l[0].href:o=l.map(d=>d.href)}else if(s.querySelector("img")){const l=[...s.querySelectorAll("img")];l.length===1?o=l[0].src:o=l.map(d=>d.src)}else if(s.querySelector("p")){const l=[...s.querySelectorAll("p")];l.length===1?o=l[0].textContent:o=l.map(d=>d.textContent)}else o=n.children[1].textContent;t[r]=o}}}),t}decorateBlocks(e){e.querySelectorAll("div.section > div > div").forEach(this.decorateBlock)}decorateBlock(e){const t=e.classList[0];if(t){e.classList.add("block"),e.dataset.blockName=t;const n=e.parentElement;n==null||n.classList.add(`${t}-wrapper`);const a=e.closest(".section");a&&a.classList.add(`${t}-container`)}}}class x{constructor(e){this.blockService=e}init(e){this.transformSection(e)}transformSection(e){e.querySelectorAll(":scope > div").forEach(t=>{this.adjustMarkup(t),this.processSectionMetaData(t)})}processSectionMetaData(e){const t=e.querySelector("div.section-metadata");if(t){const n=this.blockService.readBlockConfig(t);Object.keys(n).forEach(a=>{a==="style"?n.style.split(",").filter(r=>r).map(r=>m(r.trim())).forEach(r=>e.classList.add(r)):e.dataset[L(a)]=n[a]}),t.parentElement&&t.parentElement.remove()}}adjustMarkup(e){const t=[];let n=!1;[...e.children].forEach(a=>{if(a.tagName==="DIV"||!n){const s=document.createElement("div");t.push(s),n=a.tagName!=="DIV",n&&s.classList.add("default-content-wrapper")}t[t.length-1].append(a)}),t.forEach(a=>e.append(a)),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none"}}class P{constructor(e,t){this.sectionService=e,this.blockService=t,this.init=async()=>{this.setup(),await this.loadEager()},this.loadEager=async()=>{if(document.documentElement.lang="en",this.decorateTemplateAndTheme(),document){const a=document.querySelector("body");a&&(a.style.display="none")}const n=document.querySelector("main");n&&(n.setAttribute("id","main"),this.addSidebarContainer(n),this.sectionService.init(n),this.addInnerContainer(n),this.blockService.decorateBlocks(n),await this.loadComponents(),setTimeout(()=>{document.body.removeAttribute("style")},200))},this.loadComponents=async()=>{document.querySelectorAll(".section").forEach(a=>{const s=[],r=a.querySelectorAll("[data-block-name]");if(!r.length){a.style.removeProperty("display");return}r.forEach(o=>{o.style.display="none",s.push({name:o.dataset.blockName,element:o})}),s.length&&s.forEach(async o=>{const l=await b(()=>import(`${window.hlx.codeBasePath}/dist/${o.name}/${o.name}.js`),__vite__mapDeps([]));l.default&&await l.default(o.element)}),a.style.removeProperty("display")})}}setup(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse=new URLSearchParams(window.location.search).get("lighthouse")==="on";const e=document.querySelector('script[src$="/scripts/scripts.js"]');if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split("/scripts/scripts.js")}catch(t){console.log(t)}}addSidebarContainer(e){const t=document.createElement("div"),n=document.createElement("div"),a=document.createElement("sidebar-nav");n.classList.add("inner"),n.appendChild(a),t.setAttribute("id","sidebar"),t.appendChild(n),e.after(t)}addInnerContainer(e){const t=e.innerHTML;e.innerHTML=`<div class="inner">${t}</div>`}decorateTemplateAndTheme(){const e=y("template");e&&v(document.body,e);const t=y("theme");t&&v(document.body,t)}}(async function(){const i=new T,e=new x(i);await new P(e,i).init()})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=main.js.map
