import{j as d,x as i,T as c}from"../__chunks__/lit-element.XkUWx5ik.js";import{c as f}from"../__chunks__/createOptimizedPicture.F94eikeI.js";const w=e=>e?i`<h3>${e}</h3>`:c,$=e=>e?e.length>200?i`<p>${e.slice(0,200)}...</p>`:i`<p>${e}</p>`:c,P=e=>{const{postUrl:s,headline:p,text:a,picture:l}=e;return i`<article><a href="${s}" class="image">${l}</a> ${w(p)} ${$(a)}<ul class="actions"><li><a href="${s}" class="button">Goto Post</a></li></ul></article>`},g=e=>e.map(s=>P(s));async function T(e){e.innerHTML="";const a=(await(await fetch(`${window.hlx.codeBasePath}/query-index.json`)).json()).data.filter(t=>t.path.includes("/posts")),u=(await Promise.all(a.map(async t=>(await fetch(`${window.hlx.codeBasePath}${t.path}.plain.html`)).text()))).map(t=>{var r=new DOMParser;return r.parseFromString(t,"text/html")}),h=t=>{var n;return((n=Array.from(t.querySelectorAll("p")).find(o=>o.innerText.trim().length>0))==null?void 0:n.innerText)||void 0},m=u.map((t,r)=>{var n,o;return{postUrl:`${window.hlx.codeBasePath}${a[r].path}`,headline:((n=t.querySelector("h1"))==null?void 0:n.innerText)||((o=t.querySelector("h2"))==null?void 0:o.innerText),text:h(t),picture:f({src:a[r].image,alt:a[r].imagealt})}});e.style.removeProperty("display"),d(g(m),e)}export{T as default};
//# sourceMappingURL=posts.js.map
