import{j as d,x as i,T as c}from"../__chunks__/lit-element.XkUWx5ik.js";import{c as w}from"../__chunks__/createOptimizedPicture.OzAhTMo8.js";const f=e=>e?i`<h3>${e}</h3>`:c,$=e=>e?e.length>200?i`<p>${e.slice(0,200)}...</p>`:i`<p>${e}</p>`:c,P=e=>{const{postUrl:s,headline:p,text:a,picture:l}=e;return i`<article><a href="${s}" class="image">${l}</a> ${f(p)} ${$(a)}<ul class="actions"><li><a href="${s}" class="button">Goto Post</a></li></ul></article>`},g=e=>e.map(s=>P(s));async function T(e){e.innerHTML="";const a=(await(await fetch(`${window.hlx.codeBasePath}/query-index.json`)).json()).data.filter(t=>t.path.includes("/posts")),h=(await Promise.all(a.map(async t=>(await fetch(`${window.hlx.codeBasePath}${t.path}.plain.html`)).text()))).map(t=>{var r=new DOMParser;return r.parseFromString(t,"text/html")}),u=t=>{var n;return((n=Array.from(t.querySelectorAll("p")).find(o=>o.innerText.trim().length>0))==null?void 0:n.innerText)||void 0},m=h.map((t,r)=>{var n,o;return{postUrl:`${window.hlx.codeBasePath}${a[r].path}`,headline:((n=t.querySelector("h1"))==null?void 0:n.innerText)||((o=t.querySelector("h2"))==null?void 0:o.innerText),text:u(t),picture:w({src:a[r].image,alt:a[r].imagealt,width:"323",height:"199"})}});e.style.removeProperty("display"),d(g(m),e)}export{T as default};
//# sourceMappingURL=posts.js.map
