import{j as h,x as u}from"../__chunks__/lit-element.XkUWx5ik.js";import{f as w,c as P,S as f}from"../__chunks__/createOptimizedPicture.fmFDcpnM.js";const S=t=>{const{postUrl:s,headline:i,text:a,picture:r}=t;return u`<article><a href="${s}" class="image">${r}</a><h3>${i}</h3><p>${a==null?void 0:a.slice(0,200)}</p><ul class="actions"><li><a href="${s}" class="button">More</a></li></ul></article>`},y=t=>t.map(s=>S(s));async function T(t){t.innerHTML="";const s=new f,i=new DOMParser,r=(await s.getSiteMap()).filter(e=>e.path.includes("/posts")),m=(await Promise.all(r.map(async e=>await w(`${e.path}.plain.html`)))).map(e=>i.parseFromString(e,"text/html")).map((e,p)=>{var o,n,l,c;return{postUrl:`${window.hlx.codeBasePath}${r[p].path}`,headline:((o=e.querySelector("h1"))==null?void 0:o.innerText)||((n=e.querySelector("h2"))==null?void 0:n.innerText),text:(c=(l=e.querySelector("p"))==null?void 0:l.innerText)==null?void 0:c.trim(),picture:P({src:r[p].image,alt:r[p].imagealt})}});t.style.removeProperty("display"),h(y(m),t)}export{T as default};
//# sourceMappingURL=posts.js.map
