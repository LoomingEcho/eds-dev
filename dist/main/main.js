import{s as b,x as h}from"../__chunks__/lit-element.XkUWx5ik.js";import{t as E}from"../__chunks__/custom-element.qyLKk-84.js";import{n as P}from"../__chunks__/property.y-6B4rf9.js";const L="modulepreload",_=function(s){return"/"+s},g={},j=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){const o=document.getElementsByTagName("link");n=Promise.all(t.map(a=>{if(a=_(a),a in g)return;g[a]=!0;const i=a.endsWith(".css"),l=i?'[rel="stylesheet"]':"";if(!!r)for(let u=o.length-1;u>=0;u--){const p=o[u];if(p.href===a&&(!i||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":L,i||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),i)return new Promise((u,p)=>{d.addEventListener("load",u),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${a}`)))})}))}return n.then(()=>e()).catch(o=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o})};function m(s){return typeof s=="string"?s.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,""):""}const y=(s,e)=>{e.split(",").forEach(t=>{s.classList.add(m(t.trim()))})};function S(s,e=document){const t=s&&s.includes(":")?"property":"name",n=[...e.head.querySelectorAll(`meta[${t}="${s}"]`)].map(o=>o.content).join(", ");return n.length?n:""}function q(s){return m(s).replace(/-([a-z])/g,e=>e[1].toUpperCase())}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function M(s){return P({...s,state:!0,attribute:!1})}/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const w=(s,e,t)=>(t.configurable=!0,t.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(s,e,t),t);/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function B(s,e){return(t,r,n)=>{const o=a=>{var i;return((i=a.renderRoot)==null?void 0:i.querySelector(s))??null};if(e){const{get:a,set:i}=typeof r=="object"?t:n??(()=>{const l=Symbol();return{get(){return this[l]},set(c){this[l]=c}}})();return w(t,r,{get(){let l=a.call(this);return l===void 0&&(l=o(this),(l!==null||this.hasUpdated)&&i.call(this,l)),l}})}return w(t,r,{get(){return o(this)}})}}var x=Object.defineProperty,A=Object.getOwnPropertyDescriptor,C=(s,e,t,r)=>{for(var n=r>1?void 0:r?A(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(n=(r?a(e,t,n):a(n))||n);return r&&n&&x(e,t,n),n};let f=class extends b{constructor(){super(...arguments),this.getSubmenuName=s=>s.path.split("/")[1],this.groupByFirstLevelPath=s=>{const e={};return s.forEach(r=>{const n=this.getSubmenuName(r);e[n]||(e[n]=[]),e[n].push({path:r.path,navtitle:this.getNavTitle(r)})}),Object.values(e).map(r=>r.length===1?r[0]:{navtitle:r[0].path.split("/")[1],path:r[0].path,children:r})}}createRenderRoot(){return this}async firstUpdated(){const s=await this.fetchSitemap();this.items=this.groupByFirstLevelPath(s)}render(){if(this.items)return h`<nav id="menu"><header class="major"><h2>Menu</h2></header>${this.renderMenuItems()}</nav>`}renderSubMenu(s){return h`<span @click="${({target:e})=>e.classList.toggle("active")}" class="opener">${s.navtitle}</span><ul>${s.children.map(e=>h`<li><a href="${e.path}">${e.navtitle}</a></li>`)}</ul>`}renderMenuItem(s){return h`<li>${s.children!==void 0?this.renderSubMenu(s):h`<a href="${s.path}">${s.navtitle}</a>`}</li>`}renderMenuItems(){return h`<ul>${this.items.map(s=>this.renderMenuItem(s))}</ul>`}async fetchSitemap(){return(await(await fetch(`${window.hlx.codeBasePath}/query-index.json`)).json()).data}getNavTitle(s){return s.path==="/"?"Homepage":s.navtitle||s.title}};C([M()],f.prototype,"items",2);f=C([E("sidebar-nav")],f);var T=Object.defineProperty,R=Object.getOwnPropertyDescriptor,$=(s,e,t,r)=>{for(var n=r>1?void 0:r?R(e,t):e,o=s.length-1,a;o>=0;o--)(a=s[o])&&(n=(r?a(e,t,n):a(n))||n);return r&&n&&T(e,t,n),n};let v=class extends b{constructor(){super(...arguments),this.handleToggleClick=s=>{s.preventDefault(),console.log("this",this),this.classList.toggle("inactive")}}createRenderRoot(){return this}firstUpdated(){this.toggle.addEventListener("click",this.handleToggleClick),console.log("toggle",this)}render(){return h`<div class="inner"><sidebar-nav></sidebar-nav></div><a href="#sidebar" class="toggle">Toggle</a>`}};$([B(".toggle")],v.prototype,"toggle",2);v=$([E("sidebar-component")],v);class O{readBlockConfig(e){const t={};return e.querySelectorAll(":scope > div").forEach(r=>{if(r.children){const n=[...r.children];if(n[1]){const o=n[1],a=m(n[0].textContent??"");let i="";if(o.querySelector("a")){const l=[...o.querySelectorAll("a")];l.length===1?i=l[0].href:i=l.map(c=>c.href)}else if(o.querySelector("img")){const l=[...o.querySelectorAll("img")];l.length===1?i=l[0].src:i=l.map(c=>c.src)}else if(o.querySelector("p")){const l=[...o.querySelectorAll("p")];l.length===1?i=l[0].textContent:i=l.map(c=>c.textContent)}else i=r.children[1].textContent;t[a]=i}}}),t}decorateBlocks(e){e.querySelectorAll("div.section > div > div").forEach(this.decorateBlock)}decorateBlock(e){const t=e.classList[0];if(t){e.classList.add("block"),e.dataset.blockName=t;const r=e.parentElement;r==null||r.classList.add(`${t}-wrapper`);const n=e.closest(".section");n&&n.classList.add(`${t}-container`)}}}class k{constructor(e){this.blockService=e}init(e){this.transformSection(e)}transformSection(e){e.querySelectorAll(":scope > div").forEach(t=>{this.adjustMarkup(t),this.processSectionMetaData(t)})}processSectionMetaData(e){const t=e.querySelector("div.section-metadata");if(t){const r=this.blockService.readBlockConfig(t);Object.keys(r).forEach(n=>{n==="style"?r.style.split(",").filter(a=>a).map(a=>m(a.trim())).forEach(a=>e.classList.add(a)):e.dataset[q(n)]=r[n]}),t.parentElement&&t.parentElement.remove()}}adjustMarkup(e){const t=[];let r=!1;[...e.children].forEach(n=>{if(n.tagName==="DIV"||!r){const o=document.createElement("div");t.push(o),r=n.tagName!=="DIV",r&&o.classList.add("default-content-wrapper")}t[t.length-1].append(n)}),t.forEach(n=>e.append(n)),e.classList.add("section"),e.dataset.sectionStatus="initialized",e.style.display="none"}}class D{constructor(e,t){this.sectionService=e,this.blockService=t,this.init=async()=>{this.setup(),await this.loadEager()},this.loadEager=async()=>{if(document.documentElement.lang="en",this.decorateTemplateAndTheme(),document){const n=document.querySelector("body");n&&(n.style.display="none")}const r=document.querySelector("main");r&&(r.setAttribute("id","main"),this.addSidebarContainer(r),this.sectionService.init(r),this.addInnerContainer(r),this.blockService.decorateBlocks(r),await this.loadComponents(),setTimeout(()=>{document.body.removeAttribute("style")},200))},this.loadComponents=async()=>{document.querySelectorAll(".section").forEach(n=>{const o=[],a=n.querySelectorAll("[data-block-name]");if(!a.length){n.style.removeProperty("display");return}a.forEach(i=>{i.style.display="none",o.push({name:i.dataset.blockName,element:i})}),o.length&&o.forEach(async i=>{const l=await j(()=>import(`${window.hlx.codeBasePath}/dist/${i.name}/${i.name}.js`),__vite__mapDeps([]));l.default&&await l.default(i.element)}),n.style.removeProperty("display")})}}setup(){window.hlx=window.hlx||{},window.hlx.RUM_MASK_URL="full",window.hlx.codeBasePath="",window.hlx.lighthouse=new URLSearchParams(window.location.search).get("lighthouse")==="on";const e=document.querySelector('script[src$="/scripts/scripts.js"]');if(e)try{[window.hlx.codeBasePath]=new URL(e.src).pathname.split("/scripts/scripts.js")}catch(t){console.log(t)}}addSidebarContainer(e){const t=document.createElement("sidebar-component");t.setAttribute("id","sidebar"),e.after(t)}addInnerContainer(e){const t=e.innerHTML;e.innerHTML=`<div class="inner">${t}</div>`}decorateTemplateAndTheme(){const e=S("template");e&&y(document.body,e);const t=S("theme");t&&y(document.body,t)}}(async function(){const s=new O,e=new k(s);await new D(e,s).init()})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=main.js.map
