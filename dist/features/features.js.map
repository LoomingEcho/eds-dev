{"version":3,"file":"features.js","sources":["../../src/components/icon.ts","../../src/blocks/features/features.ts"],"sourcesContent":["import { customElement } from 'lit/decorators.js';\n\n@customElement('icon-component')\nexport class Icon extends HTMLElement {\n  get name() {\n    const srcValue = this.getAttribute('name');\n    if (!srcValue) {\n      throw new Error('Icon must have a name attribute');\n    }\n    return srcValue;\n  }\n\n  connectedCallback() {\n    console.log('RENDER ICON');\n    this.render();\n  }\n\n  async render() {\n    const svg = await this.fetchIcon();\n    console.log('render icon here', svg);\n    return `<style>:host{display:inline-block;width:50px;height:50px;}svg{display:inline-block;width:100%;height:100%;fill:currentColor;}</style>${svg}`;\n  }\n\n  async fetchIcon() {\n    const response = await fetch(`${window.hlx.codeBasePath}/dist/icons/${this.name}.svg`);\n    const textResponse = await response.text();\n    return textResponse;\n  }\n}\n","import { html, render } from 'lit';\nimport { unsafeHTML } from 'lit-html/directives/unsafe-html.js';\n\nimport '../../components/icon';\n\ninterface Feature {\n  icon: string;\n  textBlock: string;\n}\n\ntype TemplateArgs = Feature[];\n\nconst template = (features: TemplateArgs) => {\n  return html`\n    ${features.map(\n      (feature) => html`\n        <article>\n          <span class=\"icon fa-gem\"><icon-component name=\"${feature.icon}\"></icon-component></span>\n          <div class=\"content\">${unsafeHTML(feature.textBlock)}</div>\n        </article>\n      `\n    )}\n  `;\n};\n\nexport default function (block: HTMLElement) {\n  const rows = block.querySelectorAll(':scope > div');\n  let features: Feature[] = [];\n  [...rows].forEach((row) => {\n    const icon = row.children[0].innerHTML;\n    const textBlock = row.children[1].innerHTML;\n    features.push({ icon, textBlock });\n  });\n\n  block.innerHTML = '';\n\n  block.style.removeProperty('display');\n  render(template(features), block);\n}\n"],"names":["Icon","srcValue","svg","__decorateClass","customElement","template","features","html","feature","unsafeHTML","block","rows","row","icon","textBlock","render"],"mappings":"wXAGa,IAAAA,EAAN,cAAmB,WAAY,CACpC,IAAI,MAAO,CACH,MAAAC,EAAW,KAAK,aAAa,MAAM,EACzC,GAAI,CAACA,EACG,MAAA,IAAI,MAAM,iCAAiC,EAE5C,OAAAA,CACT,CAEA,mBAAoB,CAClB,QAAQ,IAAI,aAAa,EACzB,KAAK,OAAO,CACd,CAEA,MAAM,QAAS,CACP,MAAAC,EAAM,MAAM,KAAK,YACf,eAAA,IAAI,mBAAoBA,CAAG,EAC5B,wIAAwIA,CAAG,EACpJ,CAEA,MAAM,WAAY,CAGT,OADc,MADJ,MAAM,MAAM,GAAG,OAAO,IAAI,YAAY,eAAe,KAAK,IAAI,MAAM,GACjD,MAEtC,CACF,EAzBaF,EAANG,EAAA,CADNC,EAAc,gBAAgB,CAAA,EAClBJ,CAAA,ECSb,MAAMK,EAAYC,GACTC,IACHD,EAAS,IACRE,GAAYD,6DAEyCC,EAAQ,IAAI,kDACvCC,EAAWD,EAAQ,SAAS,CAAC,kBAGzD,CAAA,GAIL,SAAAF,EAAyBI,EAAoB,CACrC,MAAAC,EAAOD,EAAM,iBAAiB,cAAc,EAClD,IAAIJ,EAAsB,CAAA,EAC1B,CAAC,GAAGK,CAAI,EAAE,QAASC,GAAQ,CACzB,MAAMC,EAAOD,EAAI,SAAS,CAAC,EAAE,UACvBE,EAAYF,EAAI,SAAS,CAAC,EAAE,UAClCN,EAAS,KAAK,CAAE,KAAAO,EAAM,UAAAC,CAAW,CAAA,CAAA,CAClC,EAEDJ,EAAM,UAAY,GAEZA,EAAA,MAAM,eAAe,SAAS,EAC7BK,EAAAV,EAASC,CAAQ,EAAGI,CAAK,CAClC"}