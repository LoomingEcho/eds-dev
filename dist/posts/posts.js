import{j as h,x as w}from"../__chunks__/lit-element.XkUWx5ik.js";import{f as m,c as d}from"../__chunks__/createOptimizedPicture.WABB6dB3.js";const f=t=>{const{postUrl:a,headline:r,text:n,picture:i}=t;return w`<article><a href="${a}" class="image">${i}</a><h3>${r}</h3><p>${n==null?void 0:n.slice(0,200)}</p><ul class="actions"><li><a href="${a}" class="button">More</a></li></ul></article>`},y=t=>t.map(a=>f(a));async function v(t){t.innerHTML="";const r=(await m({endpoint:"query-index.json",getJson:!0})).data.filter(e=>e.path.includes("/posts")),u=(await Promise.all(r.map(async e=>await m({endpoint:`${e.path}.plain.html`})))).map(e=>{var s=new DOMParser;return s.parseFromString(e,"text/html")}).map((e,s)=>{var o,p,l,c;return{postUrl:`${window.hlx.codeBasePath}${r[s].path}`,headline:((o=e.querySelector("h1"))==null?void 0:o.innerText)||((p=e.querySelector("h2"))==null?void 0:p.innerText),text:(c=(l=e.querySelector("p"))==null?void 0:l.innerText)==null?void 0:c.trim(),picture:d({src:r[s].image,alt:r[s].imagealt})}});t.style.removeProperty("display"),h(y(u),t)}export{v as default};
//# sourceMappingURL=posts.js.map
